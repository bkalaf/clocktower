{
  "roleKey": "spy",
  "title": "Spy",
  "category": "minion",
  "editionTags": [
    "Trouble Brewing"
  ],
  "abilityText": "Each night, you see the Grimoire. You might register as good & as a Townsfolk or Outsider, even if dead.",
  "summary": "The Spy might appear to be a good character, but is actually evil. They also see the Grimoire, so they know the characters (and status) of all players.\n-  If any character has an ability that would detect or affect a good player, then the Spy might register as good to that character. If any character has an ability that detects Townsfolk or Outsiders, then the Spy might register as a specific Townsfolk or Outsider to that player. It is the Storyteller's choice as to what the Spy registers as, even as many characters or both alignments during the same night.\n-  A Spy that registers as a particular Townsfolk or Outsider does not have this character's ability. For example, a Spy that registers as a Slayer cannot slay the Demon.",
  "howToRun": "Each night, wake the Spy and show them the Grimoire for as long as they need. Put the Spy to sleep.\n\nEach time the Spy is targeted by an ability that detects or affects good characters, choose what character and alignment the Spy registers as. (Do whatever is appropriate, such as showing a good character token, nodding, giving finger signals, or allowing an ability to work that would normally only affect good, Townsfolk, or Outsider players.)\n\nRemember to keep your Grimoire tidy and show it to the Spy in the correct orientation, so the Spy can easily see who is who.",
  "examples": [
    "The Washerwoman learns that either Abdallah or Douglas is the Ravenkeeper. Abdallah is the Monk, and Douglas is the Spy registering as the Ravenkeeper.",
    "The Spy neighbours the Imp and the Empath. The Chef learns a \"1\" because the Spy is registering as evil. Later that night, the Empath learns a \"0\" because the Spy is now registering as good.",
    "The Spy nominates the Virgin and is executed by the Virginâ€™s ability, because the Storyteller chooses that the Spy registers as a Townsfolk. That night, the Undertaker learns that the Drunk died today, because the Spy is now registering as the Drunk."
  ],
  "setupModifications": [
    {
      "kind": "START_KNOWING",
      "recipients": "self",
      "payload": {
        "detail": "Start knowledge inferred from description"
      },
      "reason": "Start knowledge phrases detected",
      "evidence": [
        "start the game knowing (text)"
      ]
    }
  ],
  "nightOrderSteps": [
    {
      "when": "everyNight",
      "blocksNight": true,
      "description": "Wakes to use ability at night.",
      "evidence": [
        "each night (text)",
        "at night (text)"
      ]
    }
  ],
  "onMoments": [],
  "passiveAbilities": [
    {
      "kind": "REGISTRATION_MODIFIER",
      "registersAs": [
        "good",
        {
          "roleKey": "specific"
        },
        {
          "roleKey": "particular"
        },
        {
          "roleKey": "slayer"
        },
        "townsfolk"
      ],
      "scope": "sometimes",
      "evidence": [
        "register as (text)",
        "registers as (text)"
      ]
    }
  ],
  "activeAbilities": [
    {
      "kind": "night_action",
      "usage": "each_night",
      "description": "Each night, you see the Grimoire. You might register as good & as a Townsfolk or Outsider, even if dead.",
      "resolution": {
        "stKind": "RESOLVE/spy/action",
        "description": "Resolve spy night action",
        "effectType": "applyEffect"
      },
      "evidence": [
        "each night (text)",
        "at night (text)",
        "choose (inferred)"
      ],
      "intent": {
        "requestChoice": {
          "targetCount": 1,
          "description": "Choose a player"
        }
      }
    }
  ],
  "jinxes": [
    {
      "with": "Alchemist",
      "withKey": "alchemist",
      "alignment": "Good",
      "text": "An Alchemist-Spy has no Spy ability & a Spy is in play. After each execution, a living Alchemist-Spy may publicly guess a living player as the Spy. If correct, the Demon must choose the Spy tonight."
    },
    {
      "with": "Damsel",
      "withKey": "damsel",
      "alignment": "Good",
      "text": "If the Spy is (or has been) in play, the Damsel is poisoned."
    },
    {
      "with": "Heretic",
      "withKey": "heretic",
      "alignment": "Good",
      "text": "Only 1 jinxed character can be in play."
    },
    {
      "with": "Magician",
      "withKey": "magician",
      "alignment": "Good",
      "text": "When the Spy sees the Grimoire, the Demon and Magician's character tokens are removed."
    },
    {
      "with": "Ogre",
      "withKey": "ogre",
      "alignment": "Good",
      "text": "The Spy registers as evil to the Ogre."
    },
    {
      "with": "Plague Doctor",
      "withKey": "plaguedoctor",
      "alignment": "Good",
      "text": "If the Storyteller would gain the Spy ability, a Minion gains it, and learns this."
    },
    {
      "with": "Poppy Grower",
      "withKey": "poppygrower",
      "alignment": "Good",
      "text": "If the Poppy Grower has their ability, the Spy does not see the Grimoire."
    }
  ],
  "tags": {
    "isInfoRole": true,
    "isSetupModifier": true,
    "actsAtNight": true,
    "actsByClaim": false,
    "hasRoleSwap": false,
    "hasAlignmentSwap": false,
    "hasRegistrationWeirdness": true,
    "isGlobalRule": false
  },
  "stKinds": [
    "INFO/spy",
    "RESOLVE/spy/action"
  ],
  "todos": [
    "Storyteller discretion noted near \"storyteller chooses\"."
  ],
  "factTags": [
    "misregistration"
  ]
}